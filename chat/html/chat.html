<!DOCTYPE html>
<html lang="en-US">

<head>
    <link rel="icon" href="https://www.moosen.im/images/favicon.png">
    <meta charset="utf-8">
    <title>Moosen Chat</title>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-112336897-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'UA-112336897-1');
    </script>

    <link rel="icon" href="data:;base64,iVBORw0KGgo=">
    <!-- JQuery loaded first -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
    <!-- <script src="../siofu/client.js"></script> -->
    <!-- Popper.js, then Bootstrap JS -->
    <script src="https://unpkg.com/popper.js@1.12.6/dist/umd/popper.js" integrity="sha384-fA23ZRQ3G/J53mElWqVJEGJzU0sTs+SvzG8fXVWP+kJQ1lwFAOkcUOysnlKJC33U"
        crossorigin="anonymous"></script>
    <script src="https://unpkg.com/bootstrap-material-design@4.0.0-beta.4/dist/js/bootstrap-material-design.js" integrity="sha384-3xciOSDAlaXneEmyOo0ME/2grfpqzhhTcM4cE32Ce9+8DW/04AGoTACzQpphYGYe"
        crossorigin="anonymous"></script>
    <script src="../js/autosize.js"></script>
    <script>
        $(document).ready(function () { $('body').bootstrapMaterialDesign(); });
    </script>

    <source id="ogg_src" src="../sounds/notification.mp3" type="video/ogg">

    <!-- Material Design for Bootstrap fonts and icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons">
    <!-- Material Design for Bootstrap CSS -->
    <link rel="stylesheet" href="https://unpkg.com/bootstrap-material-design@4.0.0-beta.4/dist/css/bootstrap-material-design.min.css"
        integrity="sha384-R80DC0KVBO4GSTw+wZ5x2zn2pu4POSErBkf8/fSFhPXHxvHJydT0CSgAP2Yo2r4I" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="../css/chat.css">

    <!--Import Google Font-->
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans" rel="stylesheet">
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg">
        <a class="btn mm-navbtn" data-toggle="drawer" data-target="#dw-s1">
            <i class="material-icons">menu</i>
        </a>
        <a class="navbar-brand" href="#">m.im</a>
        <!-- <div class="dropdown mm-navdd">
            <button class="btn btn-secondary dropdown-toggle" style="margin-left: 100px" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                Dropdown button
            </button>
            <div class="dropdown-menu mm-navdd-items" aria-labelledby="dropdownMenuButton">
                <a class="btn" href="#">Action</a>
                <a class="btn" href="#">Another action</a>
                <a class="btn" href="#">Something else here</a>
            </div>
        </div> -->
    </nav>
    <div class="bmd-layout-container bmd-drawer-f-l main">
        <div id="dw-s1" class="bmd-layout-drawer bg-faded mm-side">
            <ul class="nav flex-column" id="mm-side-list">
                <li class="btn nav-item mm-side-image" href="#">
                    <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle img-fluid">
                    <a class="nav-link mm-side-item-text">Active</a>
                </li>
                <li class="btn nav-item mm-side-image" href="#">
                    <img src="https://pbs.twimg.com/profile_images/826115210981236736/XPMIs2Qi.jpg" alt="" class="circle img-fluid">
                    <a class="nav-link mm-side-item-text">Link</a>
                </li>
                <li class="btn nav-item mm-side-image" href="#">
                    <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle img-fluid">
                    <a class="nav-link mm-side-item-text">Link</a>
                </li>
                <li class="btn nav-item mm-side-image" href="#">
                    <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle img-fluid">
                    <a class="nav-link mm-side-item-text">Disabled testing lond text</a>
                </li>
            </ul>
        </div>
        <main class="bmd-layout-content">
            <div class="row">
                <div class="col">
                    <ul class="collection" id="messages" style="overflow-x:hidden">
                        <li id="4793" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">Tater_Hater</span>
                            <p>I'll give it a sex</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">08:36:08 PM</span>
                        </li>
                        <li id="4794" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">Tater_Hater</span>
                            <p>Sec</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">08:36:11 PM</span>
                        </li>
                        <li id="4795" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">Tater_Hater</span>
                            <p>Bith</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">08:36:13 PM</span>
                        </li>
                        <li id="4796" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">huntinator7</span>
                            <p>I think I set up email forwarding properly</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">08:36:32 PM</span>
                        </li>
                        <li id="4797" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">Tater_Hater</span>
                            <p>Haven't gotten it yet. But I'm hopeful</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">08:39:11 PM</span>
                        </li>
                        <li id="4798" class="collection-item avatar">
                            <img src="https://lh4.googleusercontent.com/-zmUAYh0QMcA/AAAAAAAAAAI/AAAAAAAAHCM/GCKjgMQc42Y/photo.jpg" alt="" class="circle">
                            <span class="title" id="msgtitle">Nick Beeson</span>
                            <p>It worked!!!</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">09:01:39 PM</span>
                        </li>
                        <li id="4799" class="collection-item avatar">
                            <img src="https://lh4.googleusercontent.com/-zmUAYh0QMcA/AAAAAAAAAAI/AAAAAAAAHCM/GCKjgMQc42Y/photo.jpg" alt="" class="circle">
                            <span class="title" id="msgtitle">Nick Beeson</span>
                            <p>Holy 💩 I have an email called moosen</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">09:01:50 PM</span>
                        </li>
                        <li id="4800" class="collection-item avatar">
                            <img src="https://lh4.googleusercontent.com/-zmUAYh0QMcA/AAAAAAAAAAI/AAAAAAAAHCM/GCKjgMQc42Y/photo.jpg" alt="" class="circle">
                            <span class="title" id="msgtitle">Nick Beeson</span>
                            <p>Now I feel legit. </p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">09:07:38 PM</span>
                        </li>
                        <li id="4801" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">huntinator7</span>
                            <p>Respond and see which email it shows that it came from</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">09:33:57 PM</span>
                        </li>
                        <li id="4802" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">huntinator7</span>
                            <p>Ah, normal email</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">09:34:14 PM</span>
                        </li>
                        <li id="4803" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">huntinator7</span>
                            <p>hmmmm</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">09:34:16 PM</span>
                        </li>
                        <li id="4804" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">Tater_Hater</span>
                            <p>I got a copy of my resume too</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">09:34:36 PM</span>
                        </li>
                        <li id="4805" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">huntinator7</span>
                            <p>I saw people on Reddit mentioning Schindler's List, and I realized that I haven't seen it before
                                and that needs to change, so I rented it on GP. You guys can probably watch too now</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">10:09:43 PM</span>
                        </li>
                        <li id="4806" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">Tater_Hater</span>
                            <p>Will do</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">10:14:12 PM</span>
                        </li>
                        <li id="4807" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">splatterdodge</span>
                            <p>Huh, isnt coming through for me.</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">10:19:18 PM</span>
                        </li>
                        <li id="4808" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">huntinator7</span>
                            <p>You can try through Youtube. Also don't know if rentals work the same as purchases</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">10:31:20 PM</span>
                        </li>
                        <li id="4809" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">splatterdodge</span>
                            <p>TIL Natalie Dormer was in Captain America.</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">12:32:26 AM</span>
                        </li>
                        <li id="4810" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">huntinator7</span>
                            <p>Fucking hell. What a movie</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">01:23:53 AM</span>
                        </li>
                        <li id="4811" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">huntinator7</span>
                            <p>Yeah that was definitely worth watching</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">01:24:17 AM</span>
                        </li>
                        <li id="4812" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">splatterdodge</span>
                            <p>Guess I should watch it at some point</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">01:25:26 AM</span>
                        </li>
                        <li id="4813" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">Tater_Hater</span>
                            <p>TIL I wanna watch Capt America again because I have a crush on Natalie Dormer</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">08:01:12 AM</span>
                        </li>
                        <li id="4814" class="collection-item avatar">
                            <img src="https://lh4.googleusercontent.com/-zmUAYh0QMcA/AAAAAAAAAAI/AAAAAAAAHCM/GCKjgMQc42Y/photo.jpg" alt="" class="circle">
                            <span class="title" id="msgtitle">Nick Beeson</span>
                            <p>@hunter you ready to do an overhaul of moosen?</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">09:05:06 AM</span>
                        </li>
                        <li id="4815" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">huntinator7</span>
                            <p>@Nick yee</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">10:19:38 AM</span>
                        </li>
                        <li id="4816" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">huntinator7</span>
                            <p>Also, that is correct ladies and gentlemen. A Republican Senate, Republican House, and Republican
                                President just caused a government shutdown.</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">10:20:30 AM</span>
                        </li>
                        <li id="4817" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">Tater_Hater</span>
                            <p>im in 1v1</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">10:20:52 AM</span>
                        </li>
                        <li id="4818" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">Tater_Hater</span>
                            <p>can tbe for long, since im at work, but hey, im barely working</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">10:21:01 AM</span>
                        </li>
                        <li id="4819" class="collection-item avatar">
                            <img src="https://lh4.googleusercontent.com/-zmUAYh0QMcA/AAAAAAAAAAI/AAAAAAAAHCM/GCKjgMQc42Y/photo.jpg" alt="" class="circle">
                            <span class="title" id="msgtitle">Nick Beeson</span>
                            <p>Don't take my government government</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">10:21:39 AM</span>
                        </li>
                        <li id="4820" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">huntinator7</span>
                            <p>When the government trying to touch you government</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">10:22:36 AM</span>
                        </li>
                        <li id="4821" class="collection-item avatar">
                            <img src="https://lh4.googleusercontent.com/-zmUAYh0QMcA/AAAAAAAAAAI/AAAAAAAAHCM/GCKjgMQc42Y/photo.jpg" alt="" class="circle">
                            <span class="title" id="msgtitle">Nick Beeson</span>
                            <p>anywho, just wanna talk real quick about how we will set this 💩 up. then we cna code and ill
                                be happy, you'll be happy, and with the government shut down, no one can stop us!</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">10:23:35 AM</span>
                        </li>
                        <li id="4822" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">huntinator7</span>
                            <p>Hells yeah. Lemme shower real quick then I'll be on</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">10:24:09 AM</span>
                        </li>
                        <li id="4823" class="collection-item avatar">
                            <img src="https://lh4.googleusercontent.com/-zmUAYh0QMcA/AAAAAAAAAAI/AAAAAAAAHCM/GCKjgMQc42Y/photo.jpg" alt="" class="circle">
                            <span class="title" id="msgtitle">Nick Beeson</span>
                            <p>cool. got a secondary monitor (usb 3.0) for my laptop that's travel sized. super nice. </p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">10:24:40 AM</span>
                        </li>
                        <li id="4824" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">huntinator7</span>
                            <p>@Nick screw it, I'm staying</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">12:04:37 PM</span>
                        </li>
                        <li id="4825" class="collection-item avatar">
                            <img src="https://lh4.googleusercontent.com/-zmUAYh0QMcA/AAAAAAAAAAI/AAAAAAAAHCM/GCKjgMQc42Y/photo.jpg" alt="" class="circle">
                            <span class="title" id="msgtitle">Nick Beeson</span>
                            <p>attta boi</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">12:05:26 PM</span>
                        </li>
                        <li id="4826" class="collection-item avatar">
                            <img src="https://lh4.googleusercontent.com/-zmUAYh0QMcA/AAAAAAAAAAI/AAAAAAAAHCM/GCKjgMQc42Y/photo.jpg" alt="" class="circle">
                            <span class="title" id="msgtitle">Nick Beeson</span>
                            <p>when you're listening to a playlist ith one song from every genre, and *Take Back the Night*
                                comes on
                            </p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">12:48:52 PM</span>
                        </li>
                        <li id="4827" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">huntinator7</span>
                            <p>HELL YEAH</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">12:49:07 PM</span>
                        </li>
                        <li id="4828" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">splatterdodge</span>
                            <p>Google really needs dynamic pricing for thier movies. Its a crime what some of those movies cost</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">01:43:23 PM</span>
                        </li>
                        <li id="4829" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">huntinator7</span>
                            <p>Seriously. Fucking force awakens was $16 until this november</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">01:44:16 PM</span>
                        </li>
                        <li id="4830" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">huntinator7</span>
                            <p>https://www.youtube.com/watch?v=TEY0dQAF4k4</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">01:46:32 PM</span>
                        </li>
                        <li id="4831" class="collection-item avatar">
                            <img src="https://lh4.googleusercontent.com/-zmUAYh0QMcA/AAAAAAAAAAI/AAAAAAAAHCM/GCKjgMQc42Y/photo.jpg" alt="" class="circle">
                            <span class="title" id="msgtitle">Nick Beeson</span>
                            <p> @hunter hows it going?</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">02:05:20 PM</span>
                        </li>
                        <li id="4832" class="collection-item avatar">
                            <img src="https://www.moosen.im/images/favicon.png" alt="" class="circle">
                            <span class="title" id="msgtitle">huntinator7</span>
                            <p>Good, just got finished fucking all of our shit up, now fixing</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">02:05:53 PM</span>
                        </li>
                        <li id="4833" class="collection-item avatar">
                            <img src="https://cdn.discordapp.com/avatars/185934787679092736/63ad490536122e19e708cd2c237cf22b.png?size=2048" alt="" class="circle">
                            <span class="title" id="msgtitle">Tater_Hater</span>
                            <p>Lol</p>
                            <span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">2:13:09 pm</span>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row">
                <form class="mm-form" autocomplete="off">
                    <div class="input-group">
                        <textarea type="text" id="send-message" class="form-control" placeholder="Message" name="message"></textarea>
                        <div class="input-group-btn">
                            <button type="submit" class="btn mm-submit">
                                <i class="material-icons">send</i>
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </main>
    </div>
    <!-- Modal tutorial -->
    <div class="modal fade" id="welcome-modal" tabindex="-1" role="dialog" aria-labelledby="welcome-modal-label" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="welcome-modal-label">Welcome to Moosen IM</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Moosen IM is a instant messaging application made by a couple of friends who want more out of their messaging
                        apps.
                        <br>
                        <br>To get started, click on 'Create Room' and give it a catchy name. Then, use 'Add to Room...' to invite
                        other users to your room.
                        <br>
                        <br>DISCLAIMER: This is an MVP product, and is currently NOT completely secure. Please be mindful of
                        the information posted.
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="btn" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal add user -->
    <div class="modal fade" id="add-modal" tabindex="-1" role="dialog" aria-labelledby="add-modal-label" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="add-modal-label">Add to Room</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Enter the email of the person you wish to invite</p>
                    <form id="email" action="">
                        <input class="form-control" type="text" id="e" placeholder="email">
                        <button class="btn" data-dismiss="modal"> Add To Room </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal create room -->
    <div id="modal2" style="z-index: 3000;" class="modal">
        <div class="modal-content">
            <h4>Create new Room</h4>
            <p>Room Name</p>
            <form id="roomname" action="">
                <input class="form-control" type="text" id="rn" placeholder="room name">
                <button class="btn waves-effect waves-light modal-close light-blue white-text"> Create Room </button>
            </form>
        </div>
    </div>
    <script>
        var canAuto = false
        var canScroll = 10

        $.fn.textWidth = function () {
            var text = $(this).html()
            $(this).html('<span>' + text + '</span>')
            var width = $(this).find('span:first').width()
            $(this).html(text)
            return width
        }

        $(function () {
            $(document).ready(function () {
                $('.mm-side-item-text').each(function (index) {
                    $(this).css('font-size', '1em')
                    while ($(this).textWidth() > $('#dw-s1').width() * 0.65) {
                        $(this).css('font-size', (parseInt($(this).css('font-size')) - 1) + "px")
                    }
                })
            })
        })

        autosize(document.querySelectorAll('textarea'))

        $('#send-message').on('input', function () {
            $(this).scrollTop($('.main')[0].scrollHeight - 10);
        });

        $('#send-message').keypress(function (e) {
            if (e.which == 13 && !e.shiftKey) {
                $(this).closest('form').submit()
                e.preventDefault()
                return false
            }
        });

        // var last_scroll_position = 0
        $(window).scroll(function () {
            if ($(window).scrollTop() + $(window).height() >= $(document).height() * .9) {
                if (!canAuto) {
                    canAuto = true
                    console.log('canAuto true')
                }
            } else if (canAuto) {
                canAuto = false
                console.log('canAuto false')
            }
            // if ($(window).scrollTop() == 0 && $(window).scrollTop() - last_scroll_position < 0) {
            //     window.scrollTo(0, 1);
            //     if (canScroll >= 10) {
            //         canScroll = 0;
            //         console.log('Retrieve previous, first_id: ' + first_id);
            //         console.log('curroom: ' + curroom);
            //         socket.emit('retPre', first_id, curroom);
            //     } else {
            //         console.log('Couldn\'t scroll: ' + canScroll);
            //     }
            // }
            // last_scroll_position = $(window).scrollTop();
        });

        $(window).resize(function () { //checking for window resize event
            console.log('resize event: ' + $(window).width() / $(window).height());
            if ($("#send-message").is(":focus") && $(window).width() / $(window).height() < 1.4 && $(window).width() / $(window).height() > 0.8) {
                window.scrollTo(0, $(document).height());
            }
        });

    </script>

    <!-- Socket.io -->
    <!-- <script>
        var event
        $(function () {
            var last_id;
            var retrieving = false;
            var first_id;
            var saved_first = "messages";
            
            var retrievePrevious = false;
            var URL_SERVER = 'https://moosen.im:443';
            var socket = io.connect(URL_SERVER);
            var uid;
            var curroom = 1;
            // var siofu = new SocketIOFileUpload(socket);
            // siofu.addEventListener("start", function (event) {
            //     event.file.meta.filetype = event.file.type;
            //     event.file.meta.room = curroom;
            // });

            var login = new Audio('../sounds/notification.mp3');
            var audio = new Audio('../sounds/login3.mp3');
            // roomList holds an array of all chatrooms a user has access to.
            // var roomList;


            $('#email').submit(function () {
                socket.emit('adduser', $('#e').val(), curroom, 0);
                console.log("form submitted " + $('#e').val());
                return false;
            });

            $('#roomname').submit(function () {
                socket.emit('addroom', $('#rn').val()); //need to add uid eventually
                console.log("add room form submitted " + $('#rn').val());
                return false;
            });

            $('#mform').submit(function () {
                var message = $('#m').val();
                if (message) {
                    // message = message.replace(/</g, '&lt;');
                    // message = message.replace(/>/g, '&gt;');
                    try {
                        socket.emit('chat message', message, curroom);

                    } catch (e) {
                        console.log(e);
                    }
                    $('#m').val('');
                }
                return false;
            });
            //for future use
            $('#room-settings').submit(function () {
            });

            $(document).ready(function () {
                var res = window.location.href.substring(23);
                socket.emit('associate', res);
                $('.collapsible').collapsible();
                $('.materialboxed').materialbox();
                $('.modal').modal();
            });

            socket.on('motd update', function (msg, room) {
                console.log('Received MOTD' + msg);
                roomnames.forEach(function (e) {
                    if (e.id == curroom) $('#roomtitle').html('<h3>' + e.name + '</h3>');
                });
                $('#motd').html("<div>" + msg + "</div>");
                $(function () {
                    $('#motd div').css('font-size', '3.3em');

                    while ($('#motd div').height() > $('#motd').height()) {
                        $('#motd div').css('font-size', (parseInt($('#motd div').css('font-size')) - 1) + "px");
                    }
                });
            });

            socket.on('chat message', function (user, msg, time, id, pic, room) {
                if (curroom == room) {
                    console.log('id: ' + id);
                    uid = user;
                    if (!retrieving) {
                        retrieving = true;
                        if ($('#messages').children().first().attr('id')) {
                            saved_first = $('#messages').children().first().attr('id');
                            console.log('saved_first set to ' + saved_first);
                        } else {
                            console.log('no messages.children.first.id found');
                        }
                        pageJump();
                    }
                    // $('#messages').children().first().attr('id')
                    document.title = user.substring(0, 3) + ": " + msg.substring(0, 10);
                    if (document.hidden) {
                        notifyMe(msg, pic);
                        login.play();
                    }
                    // console.log('last element: ' + $('#messages li').last());
                    if (!first_id) {
                        console.log('!first_id, setting to ' + id);
                        first_id = id;
                        $('#messages').append('<li id="' + id + '" class="collection-item avatar"><img src="' + pic + '" alt="" class="circle"><span class="title" id="msgtitle">'
                            + user + '</span><p>'
                            + msg + '</p><span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">'
                            + time + '</a></li>');
                    } else {
                        insertMessage('<li id="' + id + '" class="collection-item avatar"><img src="' + pic + '" alt="" class="circle"><span class="title" id="msgtitle">'
                            + user + '</span><p>'
                            + msg + '</p><span style="font-size:0.8em; color:#9F9F9F; float:right;" class="secondary-content">'
                            + time + '</a></li>', id);
                        if (first_id > id) {
                            first_id = id;
                        }
                    }
                    // console.log('id: ' + id + ' first_id: ' + first_id);
                    $('.materialboxed').materialbox();
                } else {
                    //'<span class="new badge deep-orange darken-3">1</span>'
                    console.log($("a[room='" + room + "']").children());
                    if ($("a[room='" + room + "']").children().hasClass('none')) {
                        console.log('has class none');
                        $("a[room='" + room + "']").children().removeClass('none');
                        $("a[room='" + room + "']").children().addClass('new badge deep-orange accent-3');
                        $("a[room='" + room + "']").children().text('1');
                    } else {
                        // console.log($("a[room='"+room+"']").first());
                        var curtext = parseInt($("a[room='" + room + "']").first().children().text());
                        console.log('curtext: ' + curtext);
                        curtext = curtext + 1;
                        curtext = curtext.toString();
                        console.log('curtext: ' + curtext);
                        $("a[room='" + room + "']").children().text(curtext);
                    }
                }
            });

            socket.on('login', function (displayName, email, photoURL, UserId, lastRoom) {
                console.log("logging in " + uid);
                uid = UserId;
                $('#messages').append('<li class="collection-item"><i style="color:#9F9F9F;" class="material-icons circle">info outline</i><span style="font-size:0.5em; color:#9F9F9F; float:right;" class="secondary-content">'
                    + displayName + ' logged in</span></a></li>');
                if (canAuto) {
                    window.scrollTo(0, document.body.scrollHeight);
                }
                if (document.hidden) {
                    login.play();
                }
            });

            socket.on('test', function (name) {
                console.log(name + "asdasd");
            });

            socket.on('disconnect', function (name) {
                location.reload();
            });

            roomnames = [];
            socket.on('roomlist', function (list) {
                console.log("Received roomlist: " + list);
                $('#nav-mobile').empty();
                $('#slide-out').empty();
                $('#nav-mobile').append('<li><a style="color: #FFFFFF" style="font-size:1.2em">Chatrooms</a></li>');
                $('#slide-out').append('<li><img src="images/favicon.png"></li><li><a style="color: #FFFFFF" style="font-size:1.2em">Chatrooms</a></li>');
                try {
                    list.forEach(function (element) {
                        var roomlist = {
                            name: element.name,
                            id: element.serialid
                        };
                        roomnames.push(roomlist);

                        if (element.serialid == curroom) $('#roomtitle').html('<h3>' + element.name + '</h3>');

                        $('#nav-mobile').append(`<li><a id="rooms" class="button waves-effect" room="${element.serialid}" style="color: #6EB7FF">${element.name}<span class="none"></span></a></li>`);
                        $('#slide-out').append(`<li><a id="rooms" room="${element.serialid}" style="color: #6EB7FF">${element.name}<span class="none"></span></a></li>`);
                    });
                } catch (e) { }
                $('#motd').html("test");
                $('#nav-mobile').append('<li><br></li><li><br></li><li><a id="nav-button" class="button waves-effect modal-trigger" href="#modaltutorial" style="color: #6EB7FF">Getting Started</a></li>');
                $('#slide-out').append('<li><br></li><li><br></li><li><a id="nav-button" class="button waves-effect modal-trigger" href="#modaltutorial" style="color: #6EB7FF">Getting Started</a></li>');

                $('#nav-mobile').append('<li><br></li><li><br></li><li><a id="nav-button" class="button waves-effect modal-trigger" href="#modal1" style="color: #6EB7FF">Add to room..</a></li>');
                $('#slide-out').append('<li><br></li><li><br></li><li><a id="nav-button" class="button waves-effect modal-trigger" href="#modal1" style="color: #6EB7FF">Add to room..</a></li>');

                $('#nav-mobile').append('<li><br></li><li><br></li><li><a id="nav-button" class="button waves-effect modal-trigger" href="#modal2" style="color: #6EB7FF">Create Room</a></li>');
                $('#slide-out').append('<li><br></li><li><br></li><li><a id="nav-button" class="button waves-effect modal-trigger" href="#modal2" style="color: #6EB7FF">Create Room</a></li>');
                $('#nav-mobile').append('<li><br></li><li><br></li><li><a id="nav-button" class="button waves-effect modal-trigger" href="#rsModal" style="color: #6EB7FF">Room Settings</a></li>');
                $('#slide-out').append('<li><br></li><li><br></li><li><a id="nav-button" class="button waves-effect modal-trigger" href="#rsModal" style="color: #6EB7FF">Room Settings</a></li>');

            });

            $('#nav-mobile').on('click', 'a', async function () {
                if ($(this.attributes.id).val() == 'rooms') {
                    roomnames.forEach(function (e) {
                        if (e.id == curroom) $('#roomtitle').html('<h3>' + e.name + '</h3>');
                    });

                    if ($(this.children[0])) {
                        $(this.children[0]).removeClass('new badge deep-orange darken-3');
                        $(this.children[0]).addClass('none');
                        $(this.children[0]).text('');
                    }
                    canScroll = 0;
                    console.log('Element in nav-mobile clicked');
                    $('#messages').empty();
                    curroom = $(this.attributes.room).val();
                    socket.emit('changerooms', $(this.attributes.room).val(), uid);
                    first_id = null;
                    window.scrollTo(0, document.body.scrollHeight);
                    await sleep(500);
                    canScroll = 10;
                }
            });

            $('#slide-out').on('click', 'a', async function () {
                if ($(this.attributes.id).val() == 'rooms') {
                    roomnames.forEach(function (e) {
                        if (e.id == curroom) $('#roomtitle').html('<h3>' + e.name + '</h3>');
                    });

                    if ($(this.children[0])) {
                        $(this.children[0]).removeClass('new badge deep-orange darken-3');
                        $(this.children[0]).addClass('none');
                        $(this.children[0]).text('');
                    }
                    canScroll = 0;
                    console.log('Element in slide-out clicked');
                    $('#messages').empty();
                    curroom = $(this.attributes.room).val();
                    socket.emit('changerooms', $(this.attributes.room).val(), uid);
                    window.scrollTo(0, document.body.scrollHeight);
                    await sleep(500);
                    canScroll = 10;
                }
            });

            socket.on('retreat', function () {
                console.log("Retreat!");
                window.location.href = "https://www.moosen.im/login";
            });

            socket.on('logout message', function (user) {
                $('#messages').append('<li class="collection-item"><i style="color:#9F9F9F;" class="material-icons circle">error outline</i><span style="font-size:0.5em; color:#9F9F9F; float:right;" class="secondary-content">'
                    + user + ' logged out</span></a></li>');
                if (canAuto) {
                    window.scrollTo(0, document.body.scrollHeight);
                }
            });

            function sleep(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }

            async function insertMessage(msg, id) {
                var wasInserted = false;
                $('#messages li').each(function () {
                    // console.log($(this.children[1]).text());
                    if (id < this.id && !wasInserted) {
                        $(msg).insertBefore(this);
                        try {
                            console.log($(this.previousElementSibling.children[1]).text());
                        } catch (e) {
                            console.log('Couldn\'t print');
                        }
                        wasInserted = true;
                        if (canAuto) {
                            window.scrollTo(0, $(document).height());
                        } else {
                            window.scrollTo(0, top);
                        }
                    }
                });

                if (!wasInserted) {
                    $('#messages').append(msg);
                    if (canAuto) {
                        window.scrollTo(0, $(document).height());
                    } else {
                        window.scrollTo(0, document.getElementById(saved_first).offsetTop);
                    }
                }

                await sleep(500);
                canScroll += 1;
            }

            async function pageJump() {
                await sleep(500);
                retrieving = false;
            }

            function handleFileSelect(evt) {
                console.log('In handleFileSelect');
                var files = evt.target.files; // FileList object
                for (var i = 0; i < files.length; i++) {
                    var name = files[i].name;
                    var type = files[i].type;
                    console.log("Filename: " + name + " , Type: " + type);
                    siofu.submitFiles([files[i]]);
                }
            }
            document.getElementById('add_pics').addEventListener('change', handleFileSelect, false);

        });

        if (window.File && window.FileReader && window.FileList && window.Blob) {
            // Great success! All the File APIs are supported.
        } else {
            alert('The File APIs are not fully supported in this browser.');
        }

        //notification code
        // document.addEventListener('DOMContentLoaded', function () {
        //     if (!Notification) {
        //         alert('dis broke as shit');
        //         return;
        //     }
        //     if (Notification.permission !== "granted")
        //         Notification.requestPermission();
        // });
        // function notifyMe(msg, pic) {
        //     if (Notification.permission !== "granted")
        //         Notification.requestPermission();
        //     else {
        //         var notification = new Notification('Moosen IM', {
        //             icon: pic,
        //             body: msg,
        //         });
        //         notification.onclick = function () {
        //             window.focus();
        //         };
        //     }
        // }
    </script> -->

</body>

</html>